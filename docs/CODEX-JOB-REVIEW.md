# Codex Job Review Output

Date: 2026-02-14
Context: Analysis of `.claude/skills/codex-job/SKILL.md` and the supporting runner scripts (`scripts/run_codex_task.sh`, `scripts/invoke_codex_with_review.sh`).

## Key Answers
- **Agent context loading:** Claude launches `/codex-job` by invoking `scripts/invoke_codex_with_review.sh`, which simply wraps `scripts/run_codex_task.sh` and ultimately runs `codex exec` inside the target repo. No Claude memory file, MCP server session, or additional skill state is imported into that environment aside from the standard shell, the repo path, and any explicit CLI arguments. Context preservation happens only when you tell `run_codex_task.sh` to resume with `--resume <session_id>` so Codex can reuse the session it already built (`docs/PROJECT-SUMMARY.md:85-104`).
- **Context overhead controls:** The scripts never preload extra state and keep the working set minimal; the only persistent outputs are the autogenerated `runs/codex-run-<id>.[log|meta|summary].*` artifacts. Resuming a session is the recommended way to avoid rebuilding context because the skill does not maintain any other hidden cache.
- **Suppressing unnecessary output:** `run_codex_task.sh` defaults to `LOG_VERBOSITY=low`, so it only prints the essential summary lines and writes the detailed log file. Extra diagnostic lines (`codex_command`, `script_invocation`, etc.) appear only when you raise verbosity to `normal`, `high`, or `extreme`. To keep Claude’s terminal quiet, handle the structured output via `--notify-cmd` or `--event-stream` so the script can post JSON events while the console only shows the brief summary noted above.

## Suggested Run Flags
1. `--notify-cmd "<command>"` – feeds each event JSON (run_started/run_completed) to a command that can forward them (for example, `scripts/notify_claude_hook.sh`). This lets the skill report status to another tool instead of printing every log line.
2. `--event-stream <path>` – appends JSONL event records to a file you can tail or ingest programmatically. When both options are used, the terminal output is limited to the minimal summary while event consumers handle the rest.

Pairing either flag with the default `low` verbosity is enough to minimize shell noise without losing visibility into Codex’s progress.

## Flags In Detail
- `--notify-cmd`/`--event-stream` are wrappers built into `run_codex_task.sh`, not Codex CLI switches, and they take effect before the Codex binary starts. The wrapper captures stdout/stderr into `runs/codex-run-<id>.log` and still invokes `codex exec --cd <repo> ...` exactly as usual, so token usage/cost parsing (via `parse_codex_run.py`) still reads the same log and meta files afterward.
- The flags simply duplicate the structured JSON summary (`run_started`, `run_completed`) to another consumer (a shell command or a JSONL file). Nothing is suppressed, so all the existing signals needed for token/cost accounting remain intact; you just gain an external channel to emit those events while keeping the terminal output minimal.
